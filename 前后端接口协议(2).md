### 1. **设备列表获取接口** GET

接口路径：

```
/device?serial_number=ALL
```

**RESPONE:**

```
成功{
  "timestamp": "2025-11-25T12:00:00Z",   // 时间戳
  "code":200,
  "data": {
    "total_devices": 2,                  // 设备数量
    "devices": [                         // 设备数组
      {
        "serial_number": "SN999321",     // 序列号
        "status": "在线",                 // 状态
        "location": "杭州",               // 所在地
        "current_action": "吃饭",         // 当前动作
        "traffic_statistics": "56841.12MB", // 已用流量
        "last_heartbeat": "2025-11-21T15:51:00Z" // 最后心跳上报时间
      },
      {
        "serial_number": "SN999325",     // 第二台设备
        "status": "离线",                 // 状态
        "location": "杭州",               // 所在地
        "current_action": "闲置",         // 当前动作
        "traffic_statistics": "56841.12MB", // 已用流量
        "last_heartbeat": "2025-11-25T15:51:00Z" // 最后心跳上报时间
      }
    ]
  }
}
```

```
失败{ "timestamp": "2025-11-25T12:00:00Z","code":400}
```

**备注：实际开发过程中以前端开发需要   是否加上最大限制 &page=1&limit=10  单页 10列等**

### 2. **单设备获取接口** GET

接口路径：

```
/device?serial_number=SN999321
```

**RESPONE:**

```
成功{
  "timestamp": "2025-11-25T12:00:00Z",
  "code":200,
  "data": {
    "serial_number": "SN999321",
    "status": "在线",
    "current_action": {
      "name": "吃饭", 
      "start_time": "2025-10-25T12:00:12Z", 
      "end_time": "2025-10-25T13:13:22Z"
    },
    "next_action": {
      "name": "洗澡", 
      "start_time": "2025-10-25T14:00:12Z", 
      "end_time": "2025-10-25T14:13:22Z"
    },
    "traffic_statistics": "56841.12MB", // 已用流量
    "ip": "192.168.111.222"
  }
}
```

```
失败{ "timestamp": "2025-11-25T12:00:00Z","code":400}
```



### 3. **指令下发接口** POST

接口路径：

```
/device/command
```

**body:**

```
json{
  "timestamp": "2025-11-25T12:00:00Z",
  "data": {
    "action": "吃饭",
    "sub_action": "吃黄焖鸡米饭",
    "serial_numbers": [
      "SN999321",
      "SN999322",
      "SN999323",
      "SN999324",
      "SN999325",
      "SN999326",
      "SN999327"
    ]
  }
}
```

**RESPONE:**

```
成功 {"timestamp": "2025-11-25T12:00:00Z","code":200} 失败{ "timestamp": "2025-11-25T12:00:00Z","code":400}
```

> 11.27修正 ****
>
> 停止所有命令  中 action和sub_action字段内容均填 "Terminate" 其余不变
>

```
json{
  "timestamp": "2025-11-25T12:00:00Z",
  "data": {
    "action": "Terminate",
    "sub_action": "Terminate",
    "serial_numbers": [
      "SN999321",
      "SN999322",
      "SN999323",
      "SN999324",
      "SN999325",
      "SN999326",
      "SN999327"
    ]
  }
}
```





### 4. **添加设备接口** POST

接口路径：

```
/device/add?serial_number=SN999321&verification_code=ABC123
```

**body:**

```
json{
  "timestamp": "2025-11-25T12:00:00Z",
  "data": {
    "serial_number": "SN999321",
    "verification_code": "ABC123"
  }
}
```

**RESPONE:**

```
成功 {"timestamp": "2025-11-25T12:00:00Z","code":200} 失败{ "timestamp": "2025-11-25T12:00:00Z","code":400}
```



### 5. **创建流程接口** POST

接口路径：

```
/process/create
```

**body:**

//2025 1127修正 ，  将所有步骤添加到steps数组中，新增"process_name": "日常活动" ，新增"remark": "日常活动" 然后将这3个字段添加到data中

```
json{
  "timestamp": "2025-11-25T12:00:00Z",
  "data": [
    {
      "process_name": "日常活动",
      "remark":"猫猫狗狗的日常活动",
      "steps": [
        {
          "step": 1,
          "action": "吃饭",
          "sub_action": "吃番茄炒蛋",
          "start_time": "2025-11-11T12:00:00Z",
          "end_time": "2025-11-11T13:00:00Z",
          "remark": "不要辣椒"
        },
        {
          "step": 2,
          "action": "散步",
          "sub_action": "去街心公园",
          "start_time": "2025-11-11T14:00:00Z",
          "end_time": "2025-11-11T15:00:00Z",
          "remark": "去街心公园凉亭"
        },
        {
          "step": 3,
          "action": "洗澡",
          "sub_action": "洗头",
          "start_time": "2025-11-11T16:00:00Z",
          "end_time": "2025-11-11T18:00:00Z",
          "remark": "用飘柔"
        },
        {
          "step": 4,
          "action": "休息",
          "sub_action": "休息",
          "start_time": "2025-11-11T20:00:00Z",
          "end_time": "2025-11-11T21:00:00Z",
          "remark": "休息一个小时"
        },
        {
          "step": 5,
          "action": "吃饭",
          "sub_action": "吃番茄炒蛋",
          "start_time": "2025-11-11T12:00:00Z",
          "end_time": "2025-11-11T13:00:00Z",
          "remark": "少盐"
        }
      ]
    }
  ]
}
```

**RESPONE:**

```
成功 {"timestamp": "2025-11-25T12:00:00Z","code":200} 失败{ "timestamp": "2025-11-25T12:00:00Z","code":400}
```



### 6. **获取所有流程接口** GET

接口路径：

```
/process/get?process_id=ALL
```



**RESPONE:**

```
json{
  "timestamp": "2025-11-25T12:00:00Z",
  "code":200,
  "data": [
    {
      "process_name": "小明的一天流程安排",
      "creation_time": "2025-10-31T12:00:00Z",
      "remark": "临时流程",
      "process_id": "P001"
    },
    {
      "process_name": "小红的一天流程安排",
      "creation_time": "2025-10-31T13:00:00Z",
      "remark": "临时流程",
      "process_id": "P002"
    },
    {
      "process_name": "小黄的一天流程安排",
      "creation_time": "2025-10-31T14:00:00Z",
      "remark": "临时流程",
      "process_id": "P003"
    },
    {
      "process_name": "小绿的一天流程安排",
      "creation_time": "2025-10-31T15:00:00Z",
      "remark": "临时流程",
      "process_id": "P004"
    }
  ]
}
```

```
失败{ "timestamp": "2025-11-25T12:00:00Z","code":400}
```



### 7. **获取单个流程详细内容** GET

接口路径：

```
/process/get?process_id=P001
```

 (获取单个流程详细内容)

```
json{
  "timestamp": "2025-11-25T12:00:00Z",
  "code":200,
  "data": {
    "process_id": "P001",
    "steps": [
      {
        "step": 1,
        "action": "吃饭",
        "sub_action": "吃番茄炒蛋",
        "start_time": "2025-11-11T12:00:00Z",
        "end_time": "2025-11-11T13:00:00Z",
        "remark": "不要辣椒"
      },
      {
        "step": 2,
        "action": "散步",
        "sub_action": "去街心公园",
        "start_time": "2025-11-11T14:00:00Z",
        "end_time": "2025-11-11T15:00:00Z",
        "remark": "去街心公园凉亭"
      },
      {
        "step": 3,
        "action": "洗澡",
        "sub_action": "洗头",
        "start_time": "2025-11-11T16:00:00Z",
        "end_time": "2025-11-11T18:00:00Z",
        "remark": ""
      },
      {
        "step": 4,
        "action": "休息",
        "sub_action": "休息",
        "start_time": "2025-11-11T20:00:00Z",
        "end_time": "2025-11-11T21:00:00Z",
        "remark": ""
      }
    ]
  }
}
```

```
失败{ "timestamp": "2025-11-25T12:00:00Z","code":400}
```



### 8. **修改单个流程内容**POST

接口路径：

```
/process/update?process_id=P001
```

**body**:



```
json{
  "timestamp": "2025-11-25T12:00:00Z",     // 时间戳
  "data": {
    "process_id": "P001",                   // 流程ID
    "steps": [
      {
        "step": 1,                          // 步骤1
        "action": "吃饭",                    // 动作
        "sub_action": "吃番茄炒蛋",          // 子动作
        "start_time": "2025-11-11T12:00:00Z", // 开始时间
        "end_time": "2025-11-11T13:00:00Z",   // 结束时间
        "remark": "不要辣椒"                // 备注
      },
      {
        "step": 2,                          // 步骤2
        "action": "散步",                    // 动作
        "sub_action": "去街心公园",          // 子动作
        "start_time": "2025-11-11T14:00:00Z", // 开始时间
        "end_time": "2025-11-11T15:00:00Z",   // 结束时间
        "remark": "去街心公园凉亭"          // 备注
      },
      {
        "step": 3,                          // 步骤3
        "action": "洗澡",                    // 动作
        "sub_action": "洗头",                // 子动作
        "start_time": "2025-11-11T16:00:00Z", // 开始时间
        "end_time": "2025-11-11T18:00:00Z",   // 结束时间
        "remark": "使用温和洗发水"          // 备注
      },
      {
        "step": 4,                          // 步骤4
        "action": "休息",                    // 动作
        "sub_action": "休息",                // 子动作
        "start_time": "2025-11-11T20:00:00Z", // 开始时间
        "end_time": "2025-11-11T21:00:00Z",   // 结束时间
        "remark": "休息时可以看书"            // 备注
      }
    ]
  }
}
```

**RESPONE:**

```
成功 {"timestamp": "2025-11-25T12:00:00Z","code":200} 失败{ "timestamp": "2025-11-25T12:00:00Z","code":400}
```

### 9. 删除指定流程 POST

接口路径：

```
/process/delete
```

**body**:



```
json{
  "timestamp": "2025-11-25T12:00:00Z",
  "data": {
    "process_id": [
      "P001",
      "P002",
      "P003",
      "P004",
      "P005",
      "P006",
      "P007"
    ]
  }
}
```

**RESPONE:**

```
成功 {"timestamp": "2025-11-25T12:00:00Z","code":200} 失败{ "timestamp": "2025-11-25T12:00:00Z","code":400}
```

